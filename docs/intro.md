# 写在前面：并不是所有的 Python 都长得一样

> **"The real voyage of discovery consists not in seeking new landscapes, but in having new eyes."** > **“真正的发现之旅，不在于寻找新大陆，而在于拥有新的目光。”**
> — _马塞尔·普鲁斯特 (Marcel Proust)_

欢迎阅读《Python 之美》。

在你翻开正文之前，我想先和你聊聊“偏见”。

如果你问一个十年前的程序员：“Python 是什么？”，他可能会说：“哦，那个写脚本很快，但跑得很慢，变量类型随便乱飞的胶水语言。”

如果你问一个今天的 AI 工程师或后端架构师同样的问题，他可能会展示一段使用 FastAPI 和 Pydantic 编写的代码——那里有严格的类型注解，有优雅的依赖注入，有基于 `async/await` 的高并发处理，还有极度活跃的 Rust 生态支持（比如 `uv` 和 `Ruff`）。

**并不是所有的 Python 都长得一样。**

Python 是一门正在发生剧烈进化的语言。特别是自 Python 3.5 引入类型提示（Type Hints），到 3.12 泛型语法的成熟，Python 事实上已经分裂成了两个世界：

1.  **旧世界的 Python**：动态、随意、难以维护，适合写一次性脚本。
2.  **新世界的 Python**：类型安全、结构严谨、工具链现代化，适合构建大型工程。

这本书，只关注**新世界**。

### 为什么写这本书？

市面上汗牛充栋的 Python 教程，往往存在两个断层：

1.  **受众断层**：大部分教程假设读者是编程零基础，花费大量篇幅讲“什么是变量”、“什么是循环”。但对于已经掌握 TypeScript、Java 或 Go 的你来说，这些是噪音。你不需要重学编程，你只需要**迁移**你的心智模型。
2.  **工程断层**：很多教程止步于语法。它们教会了你 `class` 怎么写，却没告诉你为什么在 Python 中滥用继承是灾难；教会了你 `import`，却没告诉你循环引用的坑；教会了你多线程，却没告诉你 GIL 的真相。

这本书试图填补这些断层。它是一本**写给“熟练工”的现代 Python 指南**。

### 写给 TypeScript 开发者

如果你习惯了 TypeScript 的开发体验，那么恭喜你，你已经掌握了现代 Python 50% 的精髓。

在这本书中，我将大量使用 TypeScript 作为对照组：

- 我们将用 TS 的 `Interface` 来理解 Python 的 `Protocol`。
- 我们将用 TS 的 `null/undefined` 来辨析 Python 的 `None`。
- 我们将用 Node.js 的 `Event Loop` 来剖析 Python 的 `AsyncIO`。

这种**“迁移学习”**的方法，能让你跳过死记硬背，直接洞察语言的设计哲学。我们甚至专门在书中设置了 **📝 TS 开发者便签**，为你指出那些“长得像但行为不同”的陷阱。

### 本书的三个核心承诺

这不是一本面面俱到的语法手册（官方文档已经做得够好了），而是一本关于**“如何写出好代码”**的工程指南。贯穿全书，我们将反复强调三点：

1.  **类型即文档**：我们推崇使用类型注解，不仅是为了静态检查，更是为了让代码本身成为最好的文档。
2.  **防御性思维**：我们不相信外部数据。我们将展示如何在 IO 边界（API、数据库）利用 Pydantic 构建坚固的防线，而不是让脏数据污染核心逻辑。
3.  **理解成本**：Python 的抽象是有代价的。我们将揭示装饰器、闭包和属性访问背后的运行时开销，教你如何在“写得快”和“跑得快”之间通过架构做权衡。

### 愿景

我希望当你读完这本书，写出的 Python 代码不再充满了 `Any` 和隐式的逻辑跳转，而是像工业级产品一样——**结构清晰、类型明确、鲁棒性强**。

Python 是一门以此为乐的语言。让我们带上“新的目光”，重新发现它的美。
